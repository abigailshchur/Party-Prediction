<html>
    <head>
        <link rel="stylesheet" href="/static/bootstrap.min.css">
        <link rel="stylesheet" href="/static/main.css">
        <link rel="stylesheet" href="css/autocomplete.css" type="text/css">
        <script  src="https://code.jquery.com/jquery-2.2.3.min.js"   integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo="   crossorigin="anonymous"></script>
        <script  src="https://cdnjs.cloudflare.com/ajax/libs/jquery.devbridge-autocomplete/1.2.24/jquery.autocomplete.js"></script>
        <script>
        $(document).ready(function(){
            $('#event_query').autocomplete({
                serviceUrl: '/pt/search_hint',
                onSelect: function (suggestion) {
                    window.location.replace("?search="+suggestion.value);
                }
            });
        });
        </script>
    </head>

    <body>
      <div class="container-fluid">
	  <div class="topcorner">
	      <p>Party Prediction (A CS 4300 Project)</p>
	      <p>Abigail Shchur(aks236)</p>
	      <p>Mukund Sudarshan(ms2666)</p>
	      <p>Jiancheng Zhu(jz448)</p>
	      <p>Andrew Wang(azw7)</p>
	  </div>

	  <form class="form-inline global-search" method='GET'>
	      <h1 style="font-size: 55px; font-family:Futura; color: #4285F4">
		  P
		  <font color=#EA4335>A</font>
		  <font color=#FBBC05>R</font>
		  <font color=#EA4335>T</font>
		  <font color=#FBBC05>Y</font>
		  <font color=#000000>_</font>
		  P
		  <font color=#34A853>R</font>
		  <font color=#EA4335>E</font>
		  <font color=#34A853>D</font>
		  <font color=#EA4335>I</font>
		  <font color=#34A853>C</font>
		  <font color=#EA4335>T</font>
		  <font color=#34A853>I</font>
		  <font color=#EA4335>O</font>
		  <font color=#34A853>N</font>
	      </h1>

	      <br><br>

	      <div class="form-group">
		  <input id="event_query" type="text" name="search" class="form-control" placeholder="Search a hashtag">
	      </div>
	      <button type="submit" class="btn btn-info"> Go! </button>
	  </form>

	  {% load extra_math %}
	  {% if search %}
	    <div class="row" style="text-align: center; margin-bottom: 1em">
	      <span class="h1">#{{search}}</span>
	    </div>
	  {% endif %}
	  {% if dems %}
	  <div class="row">
	    <div class="col-md-4 dems"><span class="h3">Most Democratic</span>
	    </div>
	    <div class="col-md-4 neutral"><span class="h3">Most Neutral</span>
	    </div>
	    <div class="col-md-4 reps"><span class="h3">Most Republican</span>
	    </div>
	  </div>
	  <div class="row">
	    <div class="col-md-4 demresults">
	      {% for line in dems %}
	      <div class="row tweet">
		{% for word in line.words %}
		{% if word.highlighted %}
		    <span class="word-highlight" style="background:{{word.color}}; color:{{word.text_color}}">{{word.text}}</span> 
		  {% else %}
		    {{word.text}} 
		  {% endif %}
		{% endfor %}
		<br>
		<div class="tweetmeta"><div class="col-md-6" style="padding:0">{{line.tweet.created_at}}</div><div class="col-md-6" style="text-align: right; padding:0">Score: {{line.scores.democrats|floatformat:3}}</div></div>
	      </div>
	      {% endfor %}
	    </div>
	    <div class="col-md-4 neutralresults">
	      {% for line in neutral %}
	      <div class="row tweet ">
		{% for word in line.words %}
		  {% if word.highlighted %}
		    <span class="word-highlight" style="background:{{word.color}}; color:{{word.text_color}}">{{word.text}}</span> 
		  {% else %}
		    {{word.text}} 
		  {% endif %}
		{% endfor %}<br>
		<div class="tweetmeta"><div class="col-md-6" style="padding:0">{{line.tweet.created_at}}</div>
		  <div class="col-md-3" style="text-align: right; padding:0"><span style="color: #7788AA">Dem:</span> {{line.scores.democrats|floatformat:3}}</div>
		  <div class="col-md-3" style="text-align: right; padding:0"><span style="color: #D36969">Rep:</span> {{line.scores.republicans|floatformat:3}}</div>
		</div>
	      </div>
	      {% endfor %}
	    </div>
	    <div class="col-md-4 represults">
	      {% for line in reps %}
	      <div class="row tweet ">
		{% for word in line.words %}
		  {% if word.highlighted %}
		    <span class="word-highlight" style="background:{{word.color}}; color:{{word.text_color}}">{{word.text}}</span> 
		  {% else %}
		    {{word.text}} 
		  {% endif %}
		{% endfor %}<br>
		<div class="tweetmeta"><div class="col-md-6" style="padding:0">{{line.tweet.created_at}}</div><div class="col-md-6" style="text-align: right; padding:0">Score: {{line.scores.republicans|floatformat:3}}</div></div>
	      </div>
	      {% endfor %}
	    </div>
	  </div>
	  {% else %}
	    {% if search %}
	      <div class="row" style="text-align: center">
		No results found.
	      </div>
	    {% endif %}
	  {% endif %}
      </div>
    </body>
</html>
